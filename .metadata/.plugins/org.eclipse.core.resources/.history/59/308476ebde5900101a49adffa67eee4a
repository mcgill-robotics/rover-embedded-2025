/*
 * encoder_conf.h
 *
 *  Created on: Jul 5, 2025
 *      Author: vince
 */

#ifndef INC_ENCODER_CONF_H_
#define INC_ENCODER_CONF_H_

struct MotorEncoder {
	TIM_HandleTypeDef *htim;
	volatile int32_t count;
	volatile int32_t min_limit_counts;
	volatile int32_t max_limit_counts;
	volatile int32_t total_counts_range;
	volatile float angle_range;
	volatile uint8_t is_homed;
	volatile float angle;

	volatile uint8_t limit_1_port;
	volatile uint8_t limit_1_pin;
	volatile uint8_t limit_2_port;
};

void MotorEncoder_Init(struct MotorEncoder* menc);

int32_t ReadEncoderCounts(TIM_HandleTypeDef *htim);

void NewPosition(struct MotorEncoder* menc);

#endif /* INC_ENCODER_CONF_H_ */
